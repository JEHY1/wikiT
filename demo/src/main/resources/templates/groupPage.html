<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h1>welcome</h1>
    <button type="button" onclick="location.href='/home'">메인</button>
    <h1 th:text="${groupId} + ' group 에 오신걸 환영합니다.'"></h1>
    <h1 th:text="'groupMaker : ' + ${constructor}"></h1>


    <form th:action="'/group/' + ${groupId}" method="get">
        <input type="hidden" name="memberEmail" value="master">
        <button th:if="!${memberSpace.equals('master')}" type="submit">공유 공간으로 이동</button>
    </form>


<h1>현재 그룹에 포함된 맴버들</h1>
<div th:each="member:${members}">
    <p th:text="${member.memberName}"></p>
    <form th:action="'/group/' + ${groupId}" method="get">
        <input type="hidden" name="memberEmail" th:value="${member.memberName}">
        <button type="submit" th:text="${member.memberName}"></button>
    </form>


    <form action="/api/expel" method="post">
        <input type="hidden" name="groupId" th:value="${groupId}">
        <input type="hidden" name="UserEmail" th:value="${member.memberName}">
        <button th:if="${isConstructor} and !${myEmail.equals(member.memberName)}" type="submit">추방</button>
    </form>

</div>


    <div>


        <div>
            <h1>그룹에 초대하기</h1>
            <input type="hidden" id="groupId" th:value="${groupId}">
            <input type="text" id="inviteeEmail">
            <input type="hidden" id="groupName" th:value="${groupName}">
            <input type="hidden" id="inviterEmail" th:value="${inviterEmail}">
            <button type ="button" id="invite-btn">invite</button>
        </div>

        <div>
            <h1>그룹 목록</h1>
            <div th:each="group:${groups}">
                <form th:action="'/group/' + ${group.groupId}" method="get">
                    <input type="hidden" name="memberEmail" value="master">
                    <button type="submit" th:text="${group.groupName}"></button>
                </form>
            </div>
        </div>

        <div>
            <h1>그룹 나가기</h1>
            <button th:if="!${isConstructor}" type="button" id="exit-btn">그룹 탈퇴</button>
            <button th:if="${isConstructor}" type="button" id="remove-btn">그룹 삭제</button>
        </div>
    </div>

    <div>
        <p th:text="${memberSpace} + ' 의 공간입니다.'"></p>
    </div>

    <div>
        <h1>글 등록 하기(내 공간, master(공유) 공간에만 가능)</h1>



        <a th:if="${memberSpace.equals('master') || memberSpace.equals(inviterEmail)}" th:href="@{/newArticle?space={space}&groupId={groupId}(space=${memberSpace}, groupId=${groupId})}" class="btn btn-primary">글 등록</a>
    </div>

    <div>
        <h1>글 목록</h1>
        <div th:each="article:${articles}">
            <h1>Article Id</h1>
            <p th:text="${article.articleId}"></p>
            <h1>제목</h1>
            <p th:text="${article.title}"></p>
            <h1>내용</h1>
            <p th:text="${article.content}"></p>
            <form action="/newArticle" method="get">
                <input type="hidden" name="space" th:value="${memberSpace}">
                <input type="hidden" name="groupId" th:value="${groupId}">
                <input type="hidden" name="articleId" th:value="${article.articleId}">
                <button type="submit">자세히 보기</button>
            </form>
            <hr>
        </div>

    </div>

    <input type="hidden" id="articleId">
    <input type="hidden" id="memberSpace" th:value="${memberSpace}">
    <script src="/js/group.js"></script>
</body>
</html>
